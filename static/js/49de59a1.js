import{R as e,x as t,e as n,_ as r,c as o,u as a,d as i}from"./35bc27a3.js";import{s as l}from"./ee7ce8fe.js";import{r as c,i as u,c as s,g as d}from"./9b9cf7db.js";import{B as f}from"./1e98e625.js";import{r as v,j as p,w as y,G as m,q as b,x as h,y as g,u as x,O as w,L as T,J as k,I as C,N as S,H as E,F as _,a1 as I,ab as j,ac as N}from"./5bdea638.js";import"./c229d341.js";/* empty css        */import{T as A}from"./b2eaa190.js";import"./2b425f2d.js";import"./9737f36b.js";const{getContractAddress:$}=n();var L={exports:{}};
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT Â© Zeno Rocha
 */const R=d(L.exports=function(){return function(){var e={686:function(e,t,n){n.d(t,{default:function(){return T}});var r=n(279),o=n.n(r),a=n(370),i=n.n(a),l=n(817),c=n.n(l);function u(e){try{return document.execCommand(e)}catch(t){return!1}}var s=function(e){var t=c()(e);return u("cut"),t},d=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var r=c()(n);return u("copy"),n.remove(),r},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=d(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=d(e.value,t):(n=c()(e),u("copy")),n};function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,r=e.container,o=e.target,a=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==o){if(!o||"object"!==v(o)||1!==o.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&o.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(o.hasAttribute("readonly")||o.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return a?f(a,{container:r}):o?"cut"===n?s(o):f(o,{container:r}):void 0};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r,o,a=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r=this,!(o=n)||"object"!==y(o)&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):o}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,n,r,o=h(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this)).resolveOptions(t),n.listenClick(e),n}return t=a,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=i()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",r=p({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(r?"success":"error",{action:n,text:r,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return x("action",e)}},{key:"defaultTarget",value:function(e){var t=x("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return x("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return f(e,t)}},{key:"cut",value:function(e){return s(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}],n&&m(t.prototype,n),r&&m(t,r),a}(o()),T=w},828:function(e){var t=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function(e,n){for(;e&&e.nodeType!==t;){if("function"==typeof e.matches&&e.matches(n))return e;e=e.parentNode}}},438:function(e,t,n){var r=n(828);function o(e,t,n,r,o){var i=a.apply(this,arguments);return e.addEventListener(n,i,o),{destroy:function(){e.removeEventListener(n,i,o)}}}function a(e,t,n,o){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&o.call(e,n)}}e.exports=function(e,t,n,r,a){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,n,r,a)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var r=n(879),o=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(r.string(e))return function(e,t,n){return o(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var a=0,i=r.length;a<i;a++)r[a].fn!==t&&r[a].fn._!==t&&o.push(r[a]);return o.length?n[e]=o:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default}()),O=e=>(j("data-v-3fd75975"),e=e(),N(),e),M={key:0,class:"bind-code-template"},z={class:"bind-code kilo-inner-model"},F={class:"title"},P={class:"content"},q={key:1,class:"traders-card"},H={class:"show-balance"},U={class:"title"},B={key:0,class:"balance"},D={key:1,class:"balance"},K={key:2,class:"referral-codes"},Y={class:"codes-title"},G={class:"title-table"},J={class:"referral-info",href:"/#/referrals/level"},X={class:"icon"},Q={class:"referrals-table-mobile"},V={class:"item-block"},W={class:"item"},Z={key:0,class:"label"},ee={key:1,class:"label"},te={key:2,class:"value"},ne={key:3,class:"value"},re={class:"share-model-content"},oe={class:"btn-name"},ae=O((()=>g("div",{class:"btn-name"},"Twitter",-1))),ie=O((()=>g("div",{class:"btn-name"},"Facebook",-1))),le=r({__name:"Affilliates",props:{pending:{typeof:String,default:""}},setup(n){const{toClipboard:r}=(e=>{const t=void 0===(null==e?void 0:e.appendToBody)||e.appendToBody;return{toClipboard:(e,n)=>new Promise(((r,o)=>{const a=document.createElement("button"),i=new R(a,{text:()=>e,action:()=>"copy",container:void 0!==n?n:document.body});i.on("success",(e=>{i.destroy(),r(e)})),i.on("error",(e=>{i.destroy(),o(e)})),t&&document.body.appendChild(a),a.click(),t&&document.body.removeChild(a)}))}})(),{t:s}=o(),d=v(),j=async e=>{try{await r((e=>(null==location?void 0:location.origin)+`/#/trade?sCode=${e}`)(e)),A({value:s("public.copied"),type:"success"})}catch(t){}},N=()=>{ge(),xe()},L=a(),{walletInfo:O,level:le,chainId:ce}=l(L),ue=v(!1),se=v(!1),de=v(!0),fe=p((()=>i(ce.value))),ve=v(),pe=e=>{d.value=e,se.value=!0},ye=()=>{ue.value=!0},me=v(),be=v([]),he=p((()=>[{title:s("referral.codeName"),tooltip:!1,ellipsis:!1,dataIndex:"code",slotName:"code",cellClass:"first-column-cell"},{title:s("referral.invitees"),tooltip:!1,ellipsis:!1,dataIndex:"inviteNumber",slotName:"inviteNumber",titleSlotName:"inviteNumberTitle"},{title:s("referral.totalAmount"),tooltip:!1,ellipsis:!1,dataIndex:"tradeTotal",slotName:"tradeTotal"},{title:s("referral.totalRebate"),tooltip:!1,ellipsis:!1,dataIndex:"inviteTotal",slotName:"inviteTotal"},{title:s("referral.shareCode"),tooltip:!1,ellipsis:!1,dataIndex:"id",slotName:"id"}])),ge=async()=>{var e;const t=await fe.value.queryReferralUserInfo({account:null==(e=O.value)?void 0:e.account});t&&(me.value=t,L.$patch({level:null==t?void 0:t.level}))},xe=async()=>{var n,r;const o=await fe.value.queryCodeListByAccount({account:null==(n=O.value)?void 0:n.account});o&&(de.value=!1,be.value=o);const a=await(async n=>{var r,o,a,i,l,s,d,p,y,m;const b=v({trade:0,recommend:0}),{referralStorageManagerAddr:h,chainId:g}=$(),x=await c({address:h,abi:e.abi,functionName:"getReferrerTier",chainId:g,args:[n]}),w=await u({contracts:[{address:h,abi:e.abi,functionName:"tiers",chainId:g,args:[x]},{address:h,abi:e.abi,functionName:"referrerDiscountShares",chainId:g,args:[n]}]});return w&&((null==(r=w[0])?void 0:r.result[2])&&(null==(o=w[1])?void 0:o.result)>0?(b.value.trade=t(null==(a=w[0])?void 0:a.result[0],4).times(t(null==(i=w[1])?void 0:i.result,4)).times(100).toFixed(2),b.value.recommend=t(null==(l=w[0])?void 0:l.result[0],4).times(new f(1).minus(t(null==(s=w[1])?void 0:s.result,4))).times(100).toFixed(2)):(b.value.trade=t(null==(d=w[0])?void 0:d.result[0],4).times(t(null==(p=w[0])?void 0:p.result[1],4)).times(100).toFixed(2),b.value.recommend=t(null==(y=w[0])?void 0:y.result[0],4).times(new f(1).minus(t(null==(m=w[0])?void 0:m.result[1],4))).times(100).toFixed(2))),b})(null==(r=O.value)?void 0:r.account);ve.value=a.value};return y([()=>{var e;return null==(e=O.value)?void 0:e.account},()=>ce.value],(([e])=>{e?(ge(),xe()):(de.value=!1,be.value=[])}),{immediate:!0}),(e,t)=>{var r,o,a,i,l,c,u;const s=m("ReferralsCreateCode"),f=m("KiloTooltip"),v=m("a-col"),p=m("a-button"),y=m("a-row"),A=m("icon-right"),$=m("icon-plus"),L=m("a-typography-text"),R=m("a-empty"),ce=m("a-table"),fe=m("a-link"),ge=m("a-space"),xe=m("icon-copy"),we=m("icon-twitter"),Te=m("icon-facebook"),ke=m("a-modal"),Ce=m("ReferralsCreateCodeModel");return b(),h(_,null,[g("div",null,[(null==(r=x(O))?void 0:r.account)&&!be.value.length?(b(),h("div",M,[g("div",z,[g("div",F,w(e.$t("referral.createCodeTitle1")),1),g("div",P,[T(s,{onCallback:N})])])])):k("",!0),be.value.length||!(null==(o=x(O))?void 0:o.account)?(b(),h("div",q,[T(y,{class:"rebate",align:"center",gutter:[12,0],wrap:""},{default:C((()=>[T(v,{flex:"auto"},{default:C((()=>{var t;return[g("div",H,[g("div",U,[T(f,{text:e.$t("referral.rebateBalance"),content:e.$t("referral.rebateTips")},null,8,["text","content"])]),(null==(t=x(O))?void 0:t.account)?(b(),h("div",B,"$"+w(n.pending),1)):(b(),h("div",D,"-"))])]})),_:1}),T(v,{flex:"130px"},{default:C((()=>{var t;return[T(p,{href:"#/referrals/affilliates",type:"outline",long:"",size:"large",disabled:!(null==(t=x(O))?void 0:t.account)},{default:C((()=>[S(w(e.$t("public.record")),1)])),_:1},8,["disabled"])]})),_:1})])),_:1})])):k("",!0),be.value.length||!(null==(a=x(O))?void 0:a.account)?(b(),h("div",K,[g("div",Y,[g("span",G,[S(w(e.$t("referral.referralCodes"))+" ",1),g("a",J,[S(w(e.$t("referral.referralInfo",{a:x(le),c:null==(i=ve.value)?void 0:i.trade,b:null==(l=ve.value)?void 0:l.recommend}))+" ",1),g("div",X,[T(A,{size:"12"})])])]),(null==(c=x(O))?void 0:c.account)?(b(),E(L,{key:0,type:"primary",onClick:ye,class:"create-code"},{default:C((()=>[T($),S(" Create ")])),_:1})):k("",!0)]),g("div",Q,[(b(!0),h(_,null,I(be.value,(t=>(b(),h("div",V,[(b(!0),h(_,null,I(x(he),(n=>(b(),h("div",W,[n.titleSlotName?(b(),h("div",Z,[T(f,{text:n.title,content:e.$t("referral.inviteNumberTips")},null,8,["text","content"])])):(b(),h("div",ee,w(n.title),1)),"id"!=n.dataIndex?(b(),h("div",te,w("tradeTotal"==n.dataIndex||"inviteTotal"==n.dataIndex?"$":"")+w(t[n.dataIndex]),1)):(b(),h("div",ne,[T(p,{type:"primary",size:"large",onClick:e=>pe(t),class:"invite-friend-btn"},{default:C((()=>[S(w(e.$t("referral.inviteFriend")),1)])),_:2},1032,["onClick"])]))])))),256))])))),256))]),T(ce,{columns:x(he),data:be.value,bordered:!1,hoverable:!1,size:"large",pagination:!1,class:"referrals-table",loading:de.value},{empty:C((()=>[de.value?k("",!0):(b(),E(R,{key:0,style:{padding:"32px 0"}}))])),inviteNumberTitle:C((({column:t})=>[g("span",null,[T(f,{text:t.title,content:e.$t("referral.inviteNumberTips")},null,8,["text","content"])])])),code:C((({record:e})=>[g("span",null,w(e.code),1)])),tradeTotal:C((({record:e})=>[g("span",null,"$"+w(e.tradeTotal),1)])),inviteTotal:C((({record:e})=>[g("span",null,"$"+w(e.inviteTotal),1)])),id:C((({record:t})=>[T(p,{type:"primary",size:"large",onClick:e=>pe(t),class:"invite-friend-btn"},{default:C((()=>[S(w(e.$t("referral.inviteFriend")),1)])),_:2},1032,["onClick"])])),_:1},8,["columns","data","loading"]),(null==(u=x(O))?void 0:u.account)?(b(),E(ge,{key:0,direction:"vertical",size:10},{default:C((()=>[T(L,{class:"codes-total"},{default:C((()=>{var t,n;return[S(w(e.$t("referral.inviteInfo",{a:(null==(t=me.value)?void 0:t.inviteNumber)||0,b:(null==(n=me.value)?void 0:n.inviteTotal)||0}))+" ",1),T(fe,{href:"/#/referrals/userdetail",hoverable:!1},{default:C((()=>[S(w(e.$t("public.record"))+" ",1),T(A)])),_:1})]})),_:1})])),_:1})):k("",!0)])):k("",!0)]),T(ke,{visible:se.value,onCancel:t[3]||(t[3]=e=>se.value=!1),"modal-class":"kilo-bindcode-modal","render-to-body":!0,footer:!1,width:"343px","title-align":"start","unmount-on-close":""},{title:C((()=>[S(w(e.$t("referral.inviteFriend")),1)])),default:C((()=>[g("div",re,[T(ge,{size:[30,0]},{default:C((()=>[g("div",null,[T(p,{shape:"circle",style:{width:"60px",height:"60px"},onClick:t[0]||(t[0]=e=>j(d.value.code))},{default:C((()=>[T(xe,{size:"24"})])),_:1}),g("div",oe,w(e.$t("referral.copyLink")),1)]),g("div",null,[T(p,{shape:"circle",style:{width:"60px",height:"60px"},onClick:t[1]||(t[1]=e=>(e=>{var t;const n=`https://twitter.com/intent/tweet?text=KiloEx ${encodeURIComponent((null==(t=window.location)?void 0:t.origin)+`/#/trade?sCode=${e}`)}&via=`;window.open(n,"blank")})(d.value.code))},{default:C((()=>[T(we,{size:"24"})])),_:1}),ae]),g("div",null,[T(p,{shape:"circle",style:{width:"60px",height:"60px"},onClick:t[2]||(t[2]=e=>(e=>{const t=`http://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(`https://testnet.kiloex.io/#/trade?sCode=${e}`)}`;window.open(t,"_blank")})(d.value.code))},{default:C((()=>[T(Te,{size:"24"})])),_:1}),ie])])),_:1})])])),_:1},8,["visible"]),T(Ce,{visible:ue.value,"onUpdate:visible":t[4]||(t[4]=e=>ue.value=e),onCallback:N},null,8,["visible"])],64)}}},[["__scopeId","data-v-3fd75975"]]);export{le as default};
