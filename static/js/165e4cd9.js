import{_ as e,u as a,p as l,s as i}from"./35bc27a3.js";import{s as v}from"./ee7ce8fe.js";import{j as u,r,w as s,G as o,q as t,H as n,I as m,N as d,O as p,y as g,L as c,u as x}from"./5bdea638.js";import"./2b425f2d.js";import"./1e98e625.js";import"./9b9cf7db.js";import"./c229d341.js";import"./9737f36b.js";const L={class:"leverage-content"},f={class:"kilo-input-label"},b=e({__name:"KiloLeverage",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:b}){const k=e,j=a(),{leverage:$,activeProduct:_,leverageDefault:V}=v(j),h=u((()=>{var e,a,l;return(null==(a=$.value)?void 0:a[null==(e=_.value)?void 0:e.id])||V.value[null==(l=_.value)?void 0:l.id]})),y=r(h.value);s((()=>h.value),(e=>{y.value||(y.value=e)}),{deep:!0,immediate:!0}),s((()=>k.visible),(()=>{var e,a;y.value=$.value[null==(e=_.value)?void 0:e.id]||V.value[null==(a=_.value)?void 0:a.id]}),{deep:!0});const z=()=>{y.value-1<=(_.value.minLeverage||1)?y.value=_.value.minLeverage||1:y.value=y.value-1},C=e=>{y.value=e},I=()=>{y.value<_.value.minLeverage&&(y.value=_.value.minLeverage)},w=()=>{y.value+1>=(_.value.maxLeverage||100)?y.value=_.value.maxLeverage||100:y.value=y.value+1},B=u((()=>l(_.value.maxLeverage,_.value.minLeverage))),U=u((()=>{const e={};return B.value.forEach((a=>{e[a]=(a||_.value.minLeverage)+"x"})),e})),q=e=>e>_.value.maxLeverage?`${_.value.maxLeverage}x`:e<_.value.minLeverage?`${_.value.minLeverage}x`:`${e}x`,D=e=>e>_.value.maxLeverage?`${_.value.maxLeverage}x`:`${i(e||0,0)}x`,E=e=>e>_.value.maxLeverage?`${_.value.maxLeverage}`:i(e.replace(/x/g,"")||0,0),F=()=>{var e;j.$patch({leverage:{...$.value,[null==(e=_.value)?void 0:e.id]:y.value}}),b("update:visible",!1)};return(a,l)=>{const i=o("icon-minus"),v=o("icon-plus"),u=o("a-input-number"),r=o("VueSlider"),s=o("a-button"),k=o("a-space"),j=o("a-modal");return t(),n(j,{visible:e.visible,onCancel:l[2]||(l[2]=e=>b("update:visible",!1)),"modal-class":"kilo-leverage-modal","render-to-body":!0,footer:!1,width:"343px","title-align":"start","unmount-on-close":""},{title:m((()=>[d(p(a.$t("order.adjustLeverage")),1)])),default:m((()=>[g("div",L,[c(k,{direction:"vertical",size:[0,24],fill:""},{default:m((()=>[g("div",null,[g("div",f,p(a.$t("positions.leverage")),1),c(u,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),min:0,placeholder:"",max:x(_).maxLeverage||100,size:"large",step:1,precision:0,parser:E,formatter:D,onInput:C,onBlur:I,"hide-button":"",class:"kilo-input-leverage"},{prefix:m((()=>[g("div",{class:"kilo-leverage-prefix",onClick:z},[c(i,{size:"14"})])])),suffix:m((()=>[g("div",{class:"kilo-leverage-suffix",onClick:w},[c(v,{size:"14"})])])),_:1},8,["modelValue","max"])]),c(r,{class:"kilo-slider",min:1*x(_).minLeverage||1,max:1*x(_).maxLeverage||100,modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value=e),"drag-on-click":!0,step:1,marks:x(U),tooltipFormatter:q},null,8,["min","max","modelValue","marks"]),c(s,{disabled:y.value<x(_).minLeverage,type:"primary",size:"large",class:"kiloex-order kiloex-order-leverage-confirm",long:"",onClick:F},{default:m((()=>[d(p(a.$t("public.confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["visible"])}}},[["__scopeId","data-v-e4922e5a"]]);export{b as default};
