import{u as e,J as t,_ as n,E as o,c as i}from"./35bc27a3.js";import{r,j as s,w as a,C as l,D as d,q as c,x as h,y as u}from"./5bdea638.js";import{s as _}from"./ee7ce8fe.js";import{p}from"./56385387.js";import{h as m}from"./c229d341.js";import"./2b425f2d.js";import"./1e98e625.js";import"./9b9cf7db.js";import"./9737f36b.js";function g(e,t){const n={...e};for(const o in t)"object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?void 0!==t[o]&&(n[o]=t[o]):n[o]=g(e[o],t[o]);return n}const v={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};let y=!1;function b(e){var t;const n=/\.woff(\d*)/.exec(e);return`<link rel="preload" href="${e}" as="font" type="font/woff${null!==(t=null==n?void 0:n[1])&&void 0!==t?t:"2"}" crossorigin="anonymous"/>`}function f(){return"CL v24.000 (internal id b7d8dd93 @ 2023-02-14T12:17:58.891Z)"}const w=class{constructor(e){var t;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");(null===(t=e.overrides)||void 0===t?void 0:t["mainSeriesProperties.priceAxisProperties.lockScale"])&&delete e.overrides["mainSeriesProperties.priceAxisProperties.lockScale"],this._options=g(v,e),"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(y||(y=!0)),this._create()}setDebugMode(e){this._innerAPI().setDebugMode(e)}onChartReady(e){this._ready?e.call(this):this._readyHandlers.push(e)}headerReady(){return this._innerWindowLoaded.then((()=>this._innerWindow().headerReady()))}onGrayedObjectClicked(e){this._doWhenInnerApiLoaded((t=>{t.onGrayedObjectClicked(e)}))}onShortcut(e,t){this._doWhenInnerWindowLoaded((n=>{n.createShortcutAction(e,t)}))}subscribe(e,t){this._doWhenInnerApiLoaded((n=>{n.subscribe(e,t)}))}unsubscribe(e,t){this._doWhenInnerApiLoaded((n=>{n.unsubscribe(e,t)}))}chart(e){return this._innerAPI().chart(e)}getLanguage(){return this._options.locale}setSymbol(e,t,n){this._innerAPI().changeSymbol(e,t,n)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded((e=>{e.closePopupsAndDialogs()}))}selectLineTool(e,t){this._innerAPI().selectLineTool(e,t)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(e){this._innerAPI().saveChart(e)}load(e,t){this._innerAPI().loadChart({json:e,extendedData:t})}getSavedCharts(e){this._innerAPI().getSavedCharts(e)}loadChartFromServer(e){this._innerAPI().loadChartFromServer(e)}saveChartToServer(e,t,n){this._innerAPI().saveChartToServer(e,t,n)}removeChartFromServer(e,t){this._innerAPI().removeChartFromServer(e,t)}onContextMenu(e){this._doWhenInnerApiLoaded((t=>{t.onContextMenu(e)}))}createButton(e){return this._innerWindow().createButton(e)}createDropdown(e){return this._innerWindow().createDropdown(e)}showNoticeDialog(e){this._doWhenInnerApiLoaded((t=>{t.showNoticeDialog(e)}))}showConfirmDialog(e){this._doWhenInnerApiLoaded((t=>{t.showConfirmDialog(e)}))}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(e){return this._innerAPI().getStudyInputs(e)}getStudyStyles(e){return this._innerAPI().getStudyStyles(e)}addCustomCSSFile(e){this._innerWindow().addCustomCSSFile(e)}applyOverrides(e){this._options=g(this._options,{overrides:e}),this._doWhenInnerWindowLoaded((t=>{t.applyOverrides(e)}))}applyStudiesOverrides(e){this._doWhenInnerWindowLoaded((t=>{t.applyStudiesOverrides(e)}))}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(e){this._innerAPI().setLayout(e)}layoutName(){return this._innerAPI().layoutName()}changeTheme(e,t){return this._innerWindow().changeTheme(e,t)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded((e=>{e.takeScreenshot()}))}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(e){this._innerAPI().drawOnAllCharts(e)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(e){this._innerAPI().setIntervalLinkingEnabled(e)}setTimeFrame(e){this._innerAPI().setTimeFrame(e)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(e,t){this._innerAPI().setFeatureEnabled(e,t)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(e){return this._innerAPI().takeClientScreenshot(e)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(e){this._ready?e(this._innerWindow()):this._innerWindowLoaded.then((()=>{e(this._innerWindow())}))}_doWhenInnerApiLoaded(e){this._doWhenInnerWindowLoaded((t=>{t.doWhenApiIsReady((()=>e(this._innerAPI())))}))}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")}_create(){const e=this._render();this._options.container_id;const t=this._options.container_id||this._options.container,n="string"==typeof t?document.getElementById(t):t;if(null===n)throw new Error(`There is no such element - #${this._options.container}`);n.innerHTML=e,this._iFrame=n.querySelector(`#${this._id}`);const o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise((e=>{const t=()=>{o.removeEventListener("load",t,!1),e()};o.addEventListener("load",t,!1)})),this._innerWindowLoaded.then((()=>{this._innerWindow().widgetReady((()=>{this._ready=!0;for(const t of this._readyHandlers)try{t.call(this)}catch(e){}this._innerWindow().initializationFinished()}))}))}_render(){const e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");this._options.library_path&&this._options.library_path.endsWith("/");const t=function(e,t){const n=new URL(`${e||""}`,location.href).href,o=JSON.parse('["bundles/runtime.07b91e827a9e2e00f3e6.js","bundles/__LANG__.8113.6effbc8b6375d6a16597.js","bundles/7717.8f75bd75d4b6ed45f3ff.css","bundles/7717.8f75bd75d4b6ed45f3ff.rtl.css","bundles/4618.1f26befe6bcf2274cd1a.js","bundles/library.37165260d08a007f8938.js","bundles/EuclidCircular.be8f862db48c2976009f.woff2"]'),i=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]'),r=encodeURIComponent(t),s=i.find((e=>e.language===r)),a=`lang="${s.iso}" dir="${s.dir}"`;return`<!DOCTYPE html><html ${(l={bundles:`\n${function(e,t,n){if(void 0===e)return"";const o=[],i=[],r=[],s=/\.css$/i,a=/\.rtl\.css$/i;for(const l of e)l.endsWith(".js")?i.push(`<script defer crossorigin="anonymous" src="${l.replace("__LANG__",n)}"><\/script>`):s.test(l)&&t===a.test(l)?r.push(`<link type="text/css" href="${l}" rel="stylesheet"/>`):/\.woff\d*/.test(l)&&o.push(b(l));return[...o,...i,...r].join("\n")}(o,"rtl"===s.dir,r)}\n`,localeLanguage:r,htmlAttrs:a,libraryPath:n}).htmlAttrs}><head><base href="${l.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${l.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]<\/script><script>(function() {\n\t\twindow.urlParams = (function () {\n\t\t\tvar match,\n\t\t\t\tpl\t = /\\+/g,  // Regex for replacing addition symbol with a space\n\t\t\t\tsearch = /([^&=]+)=?([^&]*)/g,\n\t\t\t\tdecode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },\n\t\t\t\tquery = function() {\n\t\t\t\t\t// We don't use hash on the url because: safari 13 throws an error if you attempt this\n\t\t\t\t\t// on a blob, and safari 14 will strip hash from blob urls.\n\t\t\t\t\tif (frameElement && frameElement.dataset.widgetOptions) {\n\t\t\t\t\t\treturn frameElement.dataset.widgetOptions;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow "Unexpected use of this page";\n\t\t\t\t\t}\n\t\t\t\t}(),\n\t\t\t\tresult = {};\n\n\t\t\twhile (match = search.exec(query)) {\n\t\t\t\tresult[decode(match[1])] = decode(match[2]);\n\t\t\t}\n\n\t\t\tvar additionalSettingsObject = window.parent[result.uid];\n\n\t\t\tvar customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];\n\n\t\t\tfor (var p in additionalSettingsObject) {\n\t\t\t\tif (customObjectNames.indexOf(p) === -1) {\n\t\t\t\t\tresult[p] = JSON.stringify(additionalSettingsObject[p]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t})();\n\n\t\twindow.locale = urlParams.locale;\n\t\twindow.language = urlParams.locale; // a very big attention needed here\n\t\twindow.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;\n\n\t\twindow.addCustomCSSFile = function(href) {\n\t\t\tvar link = document.createElement('link');\n\t\t\tlink.setAttribute('type', 'text/css');\n\t\t\tlink.setAttribute('rel', 'stylesheet');\n\t\t\tlink.setAttribute('href', href);\n\t\t\tlink.setAttribute('cross-origin', 'anonymous');\n\n\t\t\twindow.loadedCustomCss = new Promise((resolve) => {\n\t\t\t\tlink.onload = resolve;\n\t\t\t\tlink.onerror = resolve;\n\t\t\t});\n\t\t\tdocument.body.appendChild(link);\n\t\t};\n\n\t\twindow.loadedCustomCss = Promise.resolve();\n\t\tif (!!urlParams.customCSS) {\n\t\t\twindow.addCustomCSSFile(urlParams.customCSS);\n\t\t}\n\n\t\tvar loadingScreenParams = {};\n\n\t\tif (typeof urlParams.loading_screen === 'string') {\n\t\t\ttry {\n\t\t\t\tloadingScreenParams = JSON.parse(urlParams.loading_screen);\n\t\t\t} catch(e) {}\n\t\t}\n\n\t\tvar loadingIndicatorElement = document.getElementById('loading-indicator');\n\n\t\tif (loadingScreenParams.backgroundColor) {\n\t\t\tloadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;\n\t\t}\n\n\t\t!function(){"use strict";!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}(":global(.tv-spinner) {display: none;position: absolute;width: 1em;height: 1em;top: calc(50% - 0.5em);left: calc(50% - 0.5em);margin: 0 auto;border: 4px solid rgba(135, 151, 165, 0.2);border-radius: 50%;border-top-color: var(--tv-spinner-color, #2962FF);border-left-color: var(--tv-spinner-color, #2962FF);animation: tv-spinner__container-rotate 0.9s linear infinite;}:global(.tv-spinner)--shown {display: block;}:global(.tv-spinner)--size_xsmall {font-size: 14px;border-width: 2px;}:global(.tv-spinner)--size_small {font-size: 20px;border-width: 2px;}:global(.tv-spinner)--size_medium {font-size: 28px;border-width: 3px;}:global(.tv-spinner)--size_large {font-size: 56px;border-width: 4px;}  @keyframes tv-spinner__container-rotate {to {transform: rotate(360deg);}}");var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var o,i,r,s,l,a=(void 0===l&&(l=""),o='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),r=function(n,o){var i,r;return i=null==o?document.documentElement:o.nodeType===t.Document?o.documentElement:o,e&&(r=e.get(i)),r||((r=i.ownerDocument.createRange()).selectNodeContents(i),e&&e.set(i,r)),r.createContextualFragment(n)}(o,i),null!==(s=r.firstElementChild)&&r.removeChild(s),s),c=function(){function t(t){this._shown=!1,this._el=a.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var o=t[n];void 0!==o&&e._el.style.setProperty(n,o)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=c}();\n\n\n\t\tvar spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;\n\n\t\tvar loadingSpinner = new Spinner('large').setStyle({\n\t\t\t'--tv-spinner-color': spinnerColor,\n\t\t\tzIndex: String(2e9),\n\t\t});\n\t\tloadingSpinner.getEl().classList.add('spinner');\n\t\tloadingSpinner.spin(loadingIndicatorElement);\n\t})();<\/script></body></html>`;var l}(this._options.library_path||"",this._options.locale),n=new Blob([t],{type:"text/html"}),o=URL.createObjectURL(n),i=new URL(o),r="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return`<iframe\n\t\t\tid="${this._id}" name="${this._id}" src="${i.href}" data-widget-options="${r}"\n\t\t\t${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;">\n\t\t</iframe>`}};window.TradingView=window.TradingView||{},window.TradingView.version=f,window.TradingView.widget=w;const S=w;r(null),r(null);let C=null,P=null;const I=e=>{const t=[];return e.t.forEach(((n,o)=>{t.push({time:1e3*n,open:e.o[o],high:e.h[o],low:e.l[o],close:e.c[o]})})),t},A=async(e,t,n)=>{try{const o=await p(e);if(o.t){n.firstDataRequest&&(P=o.t[o.t.length-1]);const e=I(o);e.length?t(e,{noData:!1}):t([],{noData:!0})}else t([],{noData:!0})}catch(o){setTimeout((()=>{A(e,t,n)}))}},k={onReady(e){setTimeout((()=>{e({supported_resolutions:["1","2","3","5","15","30","60","120","240","360","480","720","1D","3D","1W","1M"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!1,supports_search:!1,supports_group_request:!1})}),0)},resolveSymbol:(t,n)=>{setTimeout((()=>{var o;const i=e();n({name:t,exchange:"KiloEx",description:t.replace(/TUSD$/,"USD"),timezone:"Asia/Hong_Kong",minmov:1,minmov2:0,session:"24x7",has_intraday:!0,intraday_multipliers:["1","2","3","5","15","30","60","120","240","360","480","720"],has_daily:!0,daily_multipliers:[1,3],has_empty_bars:!1,has_weekly_and_monthly:!0,weekly_multipliers:["1","5","10"],monthly_multipliers:["1","3","4","5","10"],visible_plots_set:"ohlc",volume_precision:5,supports_search:!1,type:"bitcoin",pricescale:Math.pow(10,null==(o=i.activeProduct)?void 0:o.priceDecimal)})}),0)},getBars:async(e,n,o,i,r)=>{var s,a;o.firstDataRequest&&C&&clearInterval(C);let l={symbol:"Crypto."+(null==(s=e.name)?void 0:s.replace(/USD$/,"/USD")),resolution:null==(a=t[n])?void 0:a.id,from:o.from,to:o.to};A(l,i,o)},subscribeBars(n,o,i,r,s){s(),(async(n,o,i,r)=>{clearInterval(C);const s=_(e());P&&(window.subscribeBarsTimer=C=setInterval((async()=>{var e,a,l;const d=null==(e=s.activeProduct.value)?void 0:e.name;d!=n.name&&r();let c={symbol:d!=n.name?"Crypto."+(null==d?void 0:d.replace(/USD$/,"/USD")):"Crypto."+(null==(a=n.name)?void 0:a.replace(/USD$/,"/USD")),resolution:null==(l=t[o])?void 0:l.id,from:P,to:m().unix()};const h=await p(c);if(h.t){const e=I(h);e.forEach(((t,o)=>{var r,a;if(o===e.length-1){P=t.time/1e3;const e=s.pythPriceMap.value[null==(a=null==(r=n.name)?void 0:r.replace(/TUSD$/,"/USD"))?void 0:a.replace(/USD$/,"/USD")];if(e&&1*e>0){const o=1*e||t.close,r=t.open,s=o>t.high?o:t.high,a=o>t.low?t.low:o;d==n.name&&i({time:t.time,open:r,high:s,low:a,close:o})}else d==n.name&&i({...t})}else d==n.name&&i({...t})}))}}),1e3))})(n,o,i,s)},unsubscribeBars(e){},unSubscribeBaseStore(){C&&clearInterval(C)}},x={class:"kilo-tradingview"},T=n({__name:"KiloTradingView",setup(t,{expose:n}){const p=o(),m=e(),{theme:g,themeConfig:v}=_(p),{activeProduct:y,kline_interval:b,kline_is_time:f}=_(m),{t:w,locale:C}=i(),P=r(null),I=s((()=>{const e=v.value[g.value];return{baseUrl:"theme.css",bgColor:e["primary-box"],horzGridPropertiesColor:e["color-chart-cross"],vertGridPropertiesColor:e["color-chart-cross"],scalesPropertiesTextColor:e["text-2"],crossHairPropertiesColor:e["text-2"],upColor:e["primary-green"],downColor:e["primary-red"],borderColor:e["primary-box"],theme:"dark"==g.value?"Dark":"Light"}})),A={"zh-CN":"zh","zh-TW":"zh_TW","ko-KR":"ko","ja-JP":"ja","en-US":"en","vi-VN":"vi"},T=r(null),D=()=>{Date.now();T.value=new S({symbol:y.value.name,interval:b.value.id,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"Asia/Hong_Kong",autosize:!0,container:P.value,locale:A[C.value],fullscreen:!1,datafeed:k,library_path:"/charting_library/",width:"100%",height:"100%",theme:I.value.theme,allow_symbol_change:!1,custom_css_url:I.value.baseUrl,charts_storage_api_version:"1.1",auto_save_delay:1,loading_screen:{backgroundColor:I.value.bgColor,foregroundColor:I.value.bgColor},time_frames:[],disabled_features:["header_widget","header_symbol_search","symbol_info","header_compare","header_chart_type","display_market_status","symbol_search_hot_key","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","volume_force_overlay","header_resolutions","legend_context_menu","save_shortcut"],enabled_features:["popup_hints","timezone_menu","show_dialog_on_snapshot_ready","disable_resolution_rebuild","insert_indicator_dialog_shortcut","show_object_tree","show_average_close_price_line_and_label","create_volume_indicator_by_default_once","display_legend_on_all_charts","dont_show_boolean_study_arguments","hide_last_na_study_output","side_toolbar_in_fullscreen_mode","layout_about_to_be_changed","left_toolbar","tick_resolution","custom_resolutions"],studies_overrides:{}}),T.value.onChartReady((function(){Date.now();L(),setTimeout((()=>{f.value?T.value.activeChart().setChartType(3):T.value.activeChart().setChartType(1)}));const e=localStorage.getItem(`kiloex-${y.value.name}`);if(e){const t=JSON.parse(e);if(t&&!t.charts&&T.value.chart().applyStudyTemplate(t),t&&t.charts){const e=[];t.charts[0].panes[0].sources.forEach(((t,n)=>{e.push(t)})),t.charts[0].panes[0].sources=e,T.value.load(t)}}T.value.subscribe("onAutoSaveNeeded",(()=>{const e=[],t=T.value.activeChart().createStudyTemplate({saveInterval:!1});t.panes[0].sources.forEach(((t,n)=>{e.push(t)})),T.value.save((n=>{(T.value.chart().getAllShapes()||[]).forEach((t=>{const o=n.charts[0].panes[0].sources.find((e=>e.id==t.id));o&&e.push(o)})),t.panes[0].sources=e,localStorage.setItem(`kiloex-${y.value.name}`,JSON.stringify(t))}))})),e||(T.value.activeChart().createStudy("Moving Average",!1,!1,{length:7},{"Plot.color.0":"rgba(241, 156, 56, 0.7)",showLabelsOnPriceScale:!1}),T.value.activeChart().createStudy("Moving Average",!1,!1,{length:25},{"Plot.color.0":"rgba(234, 61, 247, 0.7)",showLabelsOnPriceScale:!1}),T.value.activeChart().createStudy("Moving Average",!1,!1,{length:99},{"Plot.color.0":"rgba(16, 126, 250, 0.7)",showLabelsOnPriceScale:!1}))}))},L=async()=>{await T.value.changeTheme(I.value.theme),await T.value.applyOverrides({volumePaneSize:"tiny","paneProperties.background":I.value.bgColor,"paneProperties.backgroundGradientStartColor":I.value.bgColor,"paneProperties.backgroundGradientEndColor":I.value.bgColor,"paneProperties.horzGridProperties.color":I.value.horzGridPropertiesColor,"paneProperties.vertGridProperties.color":I.value.vertGridPropertiesColor,"paneProperties.crossHairProperties.color":I.value.crossHairPropertiesColor,"paneProperties.topMargin":15,"paneProperties.legendProperties.showSeriesTitle":!0,"paneProperties.legendProperties.showLegend":!0,"mainSeriesProperties.style":1,"mainSeriesProperties.candleStyle.upColor":I.value.upColor,"mainSeriesProperties.candleStyle.downColor":I.value.downColor,"mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.borderUpColor":I.value.upColor,"mainSeriesProperties.candleStyle.borderDownColor":I.value.downColor,"mainSeriesProperties.candleStyle.wickUpColor":I.value.upColor,"mainSeriesProperties.candleStyle.wickDownColor":I.value.downColor,"mainSeriesProperties.candleStyle.barColorsOnPrevClose":!1,"scalesProperties.fontSize":12,"scalesProperties.lineColor":I.value.borderColor,"scalesProperties.textColor":I.value.scalesPropertiesTextColor})};return a((()=>I.value),(e=>{L()})),a([()=>b.value.text,()=>y.value.name,()=>b.value.id],(([e,t,n],[o,i,r])=>{T.value&&T.value.setSymbol(t,n)}),{deep:!0,immediate:!0}),a((()=>C.value),(e=>{D()})),a((()=>f.value),(e=>{k&&k.unSubscribeBaseStore(),e?T.value.activeChart().setChartType(3):T.value.activeChart().setChartType(1)}),{deep:!0}),l((()=>{D()})),d((()=>{window.subscribeBarsTimer&&clearInterval(window.subscribeBarsTimer)})),n({widget:T}),(e,t)=>(c(),h("section",x,[u("div",{class:"tv_chart_container",id:"tv_chart_container",ref_key:"tv_chart_container",ref:P},null,512)]))}},[["__scopeId","data-v-d918b392"]]);export{T as default};
