import{_ as l,u as e,g as t,s as a}from"./35bc27a3.js";import{s as n}from"./ee7ce8fe.js";import{B as s}from"./1e98e625.js";import{r as i,j as o,w as u,G as r,q as v,x as d,u as c,H as m,I as p,y as b,O as k,K as g,N as x,L as h,F as $}from"./5bdea638.js";import"./2b425f2d.js";import"./9b9cf7db.js";import"./c229d341.js";import"./9737f36b.js";const f={class:"kilo-market"},w={class:"left"},I={class:"logo"},y=["src"],j={class:"market"},q={class:"label"},L={class:"market"},N={class:"label"},S={class:"market"},_={class:"label"},M={class:"value"},B={class:"market"},C={class:"label"},P={class:"value"},E={class:"market"},K={class:"label"},z={class:"market"},D={class:"label"},F={key:1,class:"kilo-market kilo-market-mobile"},O={class:"left"},R={class:"logo"},G={class:"logo-price"},H=["src"],T={class:"market"},W={class:"label"},A={class:"market-item"},J={class:"market"},Q={class:"label"},U={class:"value"},V={class:"market"},X={class:"label"},Y={class:"value"},Z={class:"market"},ll={class:"label"},el={class:"market"},tl={class:"label"},al={class:"drawer-left-menu"},nl=l({__name:"KiloMarket",setup(l){const nl=e(),{activeProduct:sl,ticker:il,fundingRate:ol,utilizationMultiplier:ul,vaultBalance:rl,maxExposureMultiplier:vl,pythPriceMap:dl,borrowingRates:cl,clientWidth:ml}=n(nl),pl=i(!1),bl=o((()=>{var l;return dl.value[[sl.value.base,sl.value.quote].join("/")]||(null==(l=il.value[sl.value.id])?void 0:l.c)||0})),kl=o((()=>{if(cl.value&&cl.value.length){const l=cl.value[sl.value.id],e=null==l?void 0:l.div(365).div(24).times(100).toFixed(4,1);return 1*e==0?"0.0000":e}return"0"})),gl=o((()=>{var l,e;return s.isBigNumber(null==(l=sl.value)?void 0:l.openInterestLong)?null==(e=sl.value)?void 0:e.openInterestLong:new s(0)})),xl=o((()=>{var l,e;return s.isBigNumber(null==(l=sl.value)?void 0:l.maxExposure)?null==(e=sl.value)?void 0:e.maxExposure:new s(0)})),hl=o((()=>{var l,e;return s.isBigNumber(null==(l=sl.value)?void 0:l.openInterestShort)?null==(e=sl.value)?void 0:e.openInterestShort:new s(0)})),$l=o((()=>{var l;return new s(xl.value).plus(null==(l=sl.value)?void 0:l.openInterestShort)})),fl=o((()=>{var l;return new s(xl.value).plus(null==(l=sl.value)?void 0:l.openInterestLong)})),wl=o((()=>{const l=rl.value.times(ul.value).toNumber(),e=xl.value.times(vl.value.toString()).toNumber();return{long:Math.min(l,e,$l.value.toNumber()),short:Math.min(l,e,fl.value.toNumber())}})),Il=l=>{nl.$patch({limitPrice:l})};return u((()=>{var l;return null==(l=sl.value)?void 0:l.id}),(()=>{pl.value=!1})),(l,e)=>{var n,s,i,o,u,nl,ul,rl,vl,dl,cl,xl,$l;const fl=r("KiloTooltip"),yl=r("a-scrollbar"),jl=r("icon-down"),ql=r("left-menu"),Ll=r("a-drawer");return v(),d($,null,[c(ml)>=800?(v(),m(yl,{key:0,style:{overflow:"auto"}},{default:p((()=>{var n,s,i,o,u,r,v,d,m,p,$,F,O,R,G,H,T,W,A,J,Q,U;return[b("div",f,[b("div",w,[b("div",I,[b("img",{src:c(t)(`token/${null==(n=c(sl))?void 0:n.base}.svg`),alt:"",srcset:""},null,8,y),b("div",j,[b("div",q,k(null==(s=c(sl))?void 0:s.base)+"/"+k(null==(i=c(sl))?void 0:i.quote),1),b("div",{class:g(["value market-price",null==(r=null==(u=c(il))?void 0:u[null==(o=c(sl))?void 0:o.id])?void 0:r.type]),onClick:e[0]||(e[0]=l=>Il(c(bl)))},k(c(a)(c(bl),null==(v=c(sl))?void 0:v.priceDecimal,!0)),3)])]),b("div",L,[b("div",N,k(l.$t("market.change24h")),1),b("div",{class:g(["value",null==(p=null==(m=c(il))?void 0:m[null==(d=c(sl))?void 0:d.id])?void 0:p.type])},[x(k("up"==(null==(O=null==(F=c(il))?void 0:F[null==($=c(sl))?void 0:$.id])?void 0:O.type)?"+":"")+k(null==(H=null==(G=c(il))?void 0:G[null==(R=c(sl))?void 0:R.id])?void 0:H.changePrice)+" ",1),b("span",null,k("up"==(null==(A=null==(W=c(il))?void 0:W[null==(T=c(sl))?void 0:T.id])?void 0:A.type)?"+":"")+k((null==(U=null==(Q=c(il))?void 0:Q[null==(J=c(sl))?void 0:J.id])?void 0:U.change)||"--")+"% ",1)],2)]),b("div",S,[b("div",_,[h(fl,{text:l.$t("market.openInterestL"),content:l.$t("tips.openInterestLong",{symbol:[c(sl).base,c(sl).quote].join("/")})},null,8,["text","content"])]),b("div",M,k(c(a)(c(gl),0))+"/"+k(c(a)(c(wl).long,0)),1)]),b("div",B,[b("div",C,[h(fl,{text:l.$t("market.openInterestS"),content:l.$t("tips.openInterestShort",{symbol:[c(sl).base,c(sl).quote].join("/")})},null,8,["text","content"])]),b("div",P,k(c(a)(c(hl),0))+"/"+k(c(a)(c(wl).short,0)),1)]),b("div",E,[b("div",K,[h(fl,{text:l.$t("market.funding"),content:l.$t("tips.funding")},null,8,["text","content"])]),b("div",{class:g(["value",c(ol)>0&&"up",c(ol)<0&&"down"])},k(c(ol)||"--")+"% ",3)]),b("div",z,[b("div",D,[h(fl,{text:l.$t("market.borrow"),content:l.$t("tips.borrow")},null,8,["text","content"])]),b("div",{class:g(["value",c(kl)>0&&"up",c(kl)<0&&"down"])},k(c(kl)||"--")+"% ",3)])])])]})),_:1})):(v(),d("div",F,[b("div",O,[b("div",R,[b("div",G,[b("img",{src:c(t)(`token/${null==(n=c(sl))?void 0:n.base}.svg`),alt:"",srcset:""},null,8,H),b("div",T,[b("div",W,k(null==(s=c(sl))?void 0:s.base)+"/"+k(null==(i=c(sl))?void 0:i.quote),1),b("div",{class:"value market-price",onClick:e[1]||(e[1]=l=>Il(c(bl)))},[x(k(c(a)(c(bl),null==(o=c(sl))?void 0:o.priceDecimal,!0))+" ",1),b("span",{class:g(null==(ul=null==(nl=c(il))?void 0:nl[null==(u=c(sl))?void 0:u.id])?void 0:ul.type)},k("up"==(null==(dl=null==(vl=c(il))?void 0:vl[null==(rl=c(sl))?void 0:rl.id])?void 0:dl.type)?"+":"")+k((null==($l=null==(xl=c(il))?void 0:xl[null==(cl=c(sl))?void 0:cl.id])?void 0:$l.change)||"--")+"% ",3)])])]),b("div",{class:"icon",onClick:e[2]||(e[2]=l=>pl.value=!0)},[h(jl,{size:"20px"})])]),b("div",A,[b("div",J,[b("div",Q,[h(fl,{text:l.$t("market.openInterestL"),content:l.$t("tips.openInterestLong",{symbol:[c(sl).base,c(sl).quote].join("/")})},null,8,["text","content"])]),b("div",U,k(c(a)(c(gl),0))+"/"+k(c(a)(c(wl).long,0)),1)]),b("div",V,[b("div",X,[h(fl,{text:l.$t("market.openInterestS"),content:l.$t("tips.openInterestShort",{symbol:[c(sl).base,c(sl).quote].join("/")})},null,8,["text","content"])]),b("div",Y,k(c(a)(c(hl),0))+"/"+k(c(a)(c(wl).short,0)),1)]),b("div",Z,[b("div",ll,[h(fl,{text:l.$t("market.funding"),content:l.$t("tips.funding")},null,8,["text","content"])]),b("div",{class:g(["value",c(ol)>0&&"up",c(ol)<0&&"down"])},k(c(ol)||"--")+"% ",3)]),b("div",el,[b("div",tl,[h(fl,{text:l.$t("market.borrow"),content:l.$t("tips.borrow")},null,8,["text","content"])]),b("div",{class:g(["value",c(kl)>0&&"up",c(kl)<0&&"down"])},k(c(kl)||"--")+"% ",3)])])])])),h(Ll,{height:"80%",placement:"bottom",closable:!0,footer:!1,class:"customer-drawer",visible:pl.value,onCancel:e[3]||(e[3]=l=>pl.value=!1),unmountOnClose:""},{title:p((()=>[x(k(l.$t("menu.selectPair")),1)])),default:p((()=>[b("div",al,[h(ql)])])),_:1},8,["visible"])],64)}}},[["__scopeId","data-v-1bf43a0c"]]);export{nl as default};
