import{_ as e,m as l,n as a,w as u,a as o,c as i,u as n,x as t,y as v,z as r,A as s,s as d,g as c,o as p,B as m,R as k,C as g,D as x,e as b}from"./35bc27a3.js";import{s as f}from"./ee7ce8fe.js";import{B as y}from"./1e98e625.js";import{r as w,a4 as $}from"./9b9cf7db.js";import{r as h,g as F,c as S,j as C,w as _,G as I,q as z,x as L,y as T,K as M,O as B,J as O,L as q,I as P,F as N,a1 as j,u as U,H as V,Y as E,N as D}from"./5bdea638.js";import"./2b425f2d.js";import"./c229d341.js";import"./9737f36b.js";const K={class:"kilo-order"},A={key:0,class:"kili-tabs-islong"},R={class:"kiloex-order"},H={class:"kilo-order-content"},Q={class:"icon kiloex-order kiloex-order-leverage"},G=["src"],W={class:"content kiloex-order kiloex-order-leverage"},J={class:"label kiloex-order kiloex-order-leverage"},Y={class:"value kiloex-order kiloex-order-leverage"},Z={class:"icon"},X=["src"],ee={class:"content"},le={class:"label"},ae={class:"value"},ue={class:"operate"},oe={class:"limit-price-input-suffix"},ie={class:"icon"},ne=["src"],te={class:"content"},ve={class:"label"},re={class:"kiloex-order kiloex-order-order-by-value"},se={class:"value"},de={class:"kilo-avbl"},ce={class:"kilo-order-slider"},pe={key:1},me={href:"https://testnet.bnbchain.org/faucet-smart",target:"_blank"},ke={key:2},ge=["innerHTML"],xe={key:3},be={key:4},fe={key:5},ye={key:0},we={key:1},$e={class:"kilo-row"},he={class:"kilo-span-value"},Fe={class:"kilo-row"},Se={class:"kilo-row"},Ce={class:"kilo-span-value"},_e={class:"kilo-row"},Ie={class:"kilo-span-value"},ze={class:"kilo-row"},Le={class:"kilo-span-value"},Te={class:"kilo-row"},Me={class:"kilo-span-value"},Be={class:"kilo-row"},Oe={class:"kilo-span-value"},qe={class:"kilo-row"},Pe={class:"kilo-span-value"},Ne={class:"kilo-row"},je={class:"kilo-span-value"},Ue={class:"kilo-row"},Ve={class:"kilo-span-value"},Ee={class:"kilo-row"},De={class:"kilo-span-value"},Ke={class:"kilo-row"},Ae={class:"kilo-span-value"},Re={class:"kilo-row"},He={class:"kilo-span-value"},Qe={class:"kilo-row"},Ge={class:"kilo-span-value"},We={class:"kilo-row"},Je={class:"kilo-span-value"},Ye={class:"kilo-row"},Ze={class:"kilo-span-value"},Xe={class:"kilo-row"},el={class:"kilo-span-value"},ll={class:"kilo-row"},al={class:"kilo-span-value"},ul={key:1,class:"mobile-footer-buy-btn-group"},ol={class:"tiigger-tip"},il=e({__name:"KiloOrder",props:{orderType:{type:Number,default:1},orderMobile:{type:Boolean,default:!1},closeDrawer:{type:Function,default:()=>{}}},setup(e){const il=e,{getTokenBalance:nl,getChainTokenBalance:tl}=l(),vl=a(),{userInfo:rl}=f(vl),sl=u(),{guideSteps:dl,maxSteps:cl}=f(sl),pl=e=>{var l;sl.$patch({guideSteps:e||(1==dl.value?(null==(l=v[ea.value])?void 0:l.mainnet)?2:3:dl.value+1)})},ml=h({1:"market",2:"limit",3:"conditional"}),{root:kl}=F(),gl=S("getPythPrice"),xl=o(),bl=h(!1),fl=h(!1),yl=h(!1),{t:wl,locale:$l}=i(),hl=h(!1),{openPositionAction:Fl,getContractAddress:Sl}=b(),Cl=n(),_l=h(""),Il=h(""),zl=h(),Ll=h(),{activeProduct:Tl,leverage:Ml,leverageDefault:Bl,walletInfo:Ol,ticker:ql,currentQuote:Pl,cumulativeFundings:Nl,liquidationThreshold:jl,funding:Ul,isQuoteOrder:Vl,chainMainSymbol:El,minExecutionFee:Dl,minExecutionFee1:Kl,fundingRate:Al,minMargin:Rl,vaultBalance:Hl,utilizationMultiplier:Ql,maxExposureMultiplier:Gl,totalOpenInterestLong:Wl,totalOpenInterestShort:Jl,pythPriceMap:Yl,limitPrice:Zl,cumulativeBorrowings:Xl,chainId:ea,positionList:la,inviteInfo:aa,defaultCode:ua,clientWidth:oa}=f(Cl),ia={mounted(e,l){function a(a){if(e.contains(a.target))return!1;l.value&&"function"==typeof l.value&&l.value(a)}e.Tag=a,document.addEventListener("click",a)},beforeUnmount(e){document.removeEventListener("click",e.Tag),delete e.Tag}},na=h(!1),ta=h(!1),va=()=>{ta.value=!1,Ll.value.blur()},ra=()=>{na.value=!1,zl.value.blur()},sa=C((()=>({1:wl("order.market"),2:wl("order.limit"),3:wl("order.stopMarket")}))),da=h(!il.orderMobile||1==il.orderType),ca=h(!1),pa=h("1"),ma=h(""),ka=h(""),ga=h(0),xa=C((()=>{var e,l,a;return(null==(l=Ml.value)?void 0:l[null==(e=Tl.value)?void 0:e.id])||Bl.value[null==(a=Tl.value)?void 0:a.id]})),ba=C((()=>{var e;return(null==(e=Tl.value)?void 0:e.quoteDecimal)||2}));C((()=>{var e;return(null==(e=Tl.value)?void 0:e.decimal)||2}));const fa=C((()=>new y(1).minus(t(jl.value,4)).times(100))),ya=C((()=>{var e,l,a,u;return y.isBigNumber(null==(e=Tl.value)?void 0:e.openInterestLong)?null==(a=Tl.value)?void 0:a.openInterestLong.toFixed(null==(l=Tl.value)?void 0:l.decimal,1):null==(u=Tl.value)?void 0:u.openInterestLong})),wa=C((()=>{var e,l,a,u;return y.isBigNumber(null==(e=Tl.value)?void 0:e.openInterestShort)?null==(a=Tl.value)?void 0:a.openInterestShort.toFixed(null==(l=Tl.value)?void 0:l.decimal,1):null==(u=Tl.value)?void 0:u.openInterestShort})),$a=C((()=>{var e,l;return(null==(l=null==(e=Tl.value)?void 0:e.productFee)?void 0:l.times(100))||0})),ha=C((()=>{var e;return Yl.value[[Tl.value.base,Tl.value.quote].join("/")]||(null==(e=ql.value[Tl.value.id])?void 0:e.c)||0})),Fa=C((()=>1==pa.value?1*Dl.value:1*Kl.value)),Sa=C((()=>{var e,l,a,u,o,i,n,t,r;return 1*(null==(e=Ol.value)?void 0:e.balance)==0&&1*(null==(l=Ol.value)?void 0:l.chainBalance)<Fa.value?wl("error.noAvblBoth",{a:null==(a=Ol.value)?void 0:a.chainSymbol,b:(null==(u=v[ea.value])?void 0:u.quote)||"USDT"}):1*(null==(o=Ol.value)?void 0:o.balance)!=0&&1*(null==(i=Ol.value)?void 0:i.chainBalance)<Fa.value?(null==(n=Ol.value)?void 0:n.chainSymbol)||(null==(t=v[ea.value])?void 0:t.mainSymbol):(null==(r=v[ea.value])?void 0:r.quote)||"USDT"})),Ca=C((()=>{var e,l,a;return 1*(null==(l=null==(e=Ol.value)?void 0:e.balance)?void 0:l.truncate(2))==0||1*(null==(a=Ol.value)?void 0:a.chainBalance)<Fa.value})),_a=C((()=>{var e;return new y(null==(e=Tl.value)?void 0:e.reserve)})),Ia=C((()=>{var e;return new y(null==(e=Tl.value)?void 0:e.maxExposure)})),za=C((()=>{var e,l,a;const u=null==(e=Tl.value)?void 0:e.openInterestLong,o=null==(l=Tl.value)?void 0:l.openInterestShort,i=new y((null==u?void 0:u.toString())||0).minus(o).div(Ia.value).times(null==(a=Tl.value)?void 0:a.maxShift),n=h(Ra.value);let t;return da.value?(t=_a.value.times(_a.value).div(_a.value.minus(n.value)).minus(_a.value).div(n.value),i.gt(0)&&(t=t.plus(i))):(t=_a.value.minus(_a.value.times(_a.value).div(_a.value.plus(n.value))).div(n.value),i.lt(0)&&(t=t.plus(i))),t.isNaN()?new y(0):t})),La=C((()=>{var e;return Vl.value?ba.value:null==(e=Tl.value)?void 0:e.decimal})),Ta=[1,5,20],Ma=h([]),Ba=C((()=>{var e;return null==(e=Tl.value)?void 0:e.priceDecimal}));_((()=>Ba.value),(e=>{const l=[];Ta.forEach((a=>{l.push({plus:new y(a).div(r(e-1)).toString(),minus:new y(a).div(r(e-1)).times(-1).toString()})})),Ma.value=l}),{immediate:!0,deep:!0});const Oa=()=>{var e,l;Cl.$patch({leverage:{...xa.value,[null==(e=Tl.value)?void 0:e.id]:null==(l=Tl.value)?void 0:l.maxLeverage}}),setTimeout((()=>{ka.value=Ea.value.toFixed(La.value,1),Xa(ka.value,"sizevalue")}),100)},qa=C((()=>za.value.isZero()?new y(0):da.value?za.value.minus(1).times(100):new y(1).minus(za.value).times(100))),Pa=C((()=>Vl.value?new y(Ra.value).toFixed(ba.value,1):Aa.value)),Na=C((()=>{const e=Tl.value.productFee;return new y(Ra.value).times(e)})),ja=C((()=>{var e,l,a;const u=Tl.value.productFee,o=new y((null==(e=Ol.value)?void 0:e.balance)||0).times(xa.value).times(u);return new y((null==(a=null==(l=Ol.value)?void 0:l.balance)?void 0:a.truncate(2))||0).minus(o).times(xa.value)}));C((()=>{const e=Tl.value.productFee;return new y(ja.value).times(e)}));const Ua=h(!0),Va=C((()=>{const e=Hl.value.times(Ql.value).minus(Wl.value).minus(Jl.value).toNumber(),l=Ia.value.times(Gl.value.toString()).toNumber();let a;return a=da.value?Ia.value.plus(wa.value).minus(ya.value):Ia.value.plus(ya.value).minus(wa.value),a=Math.max(Math.min(e,l,a.toNumber()),0),Ua.value&&setTimeout((()=>{Ua.value=!1}),2e3),1*new y(a).toFixed(2,1)})),Ea=C((()=>{let e;return e=new y(Math.max(Math.min(Va.value,ja.value.toNumber()),0)),Vl.value?e:1==pa.value&&ha.value?e.div(ha.value||0):1!=pa.value&&ma.value&&1*ma.value>0?e.div(ma.value||0):new y(0)})),Da=C((()=>{const e=new y(qa.value).div(100);if(da.value){if(1==pa.value){const l=new y(ha.value);return l.plus(l.times(e)).toFixed(Ba.value,1)}{const l=new y(ma.value);return l.plus(l.times(e)).toFixed(Ba.value,1)}}if(1==pa.value){const l=new y(ha.value);return l.minus(l.times(e)).toFixed(Ba.value,1)}{const l=new y(ma.value);return l.minus(l.times(e)).toFixed(Ba.value,1)}})),Ka=C((()=>{var e,l,a,u;if(Ra.value.div(xa.value).gt(0)){return s({isLong:da.value,leverage:xa.value,margin:Ra.value.div(xa.value),price:Da.value,funding:Ul.value,cumulativeFunding:(null==(l=Nl.value)?void 0:l[null==(e=Tl.value)?void 0:e.id])||"0",borrowing:"0",liquidationThreshold:jl.value||"0",cumulativeBorrowing:(null==(u=Xl.value)?void 0:u[null==(a=Tl.value)?void 0:a.id])||"0"})}return 0})),Aa=C((()=>ka.value)),Ra=C((()=>Vl.value?new y(ka.value||0):1!=pa.value?new y(ka.value||0).times(ma.value):new y(ka.value||0).times(ha.value))),Ha=C((()=>{const e=Ra.value.div(xa.value);return isNaN(e)?"--":e})),Qa=h({0:"",25:"",50:"",75:"",100:""}),Ga=()=>{ma.value=d(ha.value,Ba.value)},Wa=e=>`${e}%`,Ja=e=>{const l=Ea.value.times(e/100).toFixed(La.value,1);ka.value=1*l>0?l:""},Ya=e=>{ga.value=e;const l=Ea.value.times(e/100).toFixed(La.value,1);ka.value=1*l>0?l:""},Za=e=>{Il.value=e,"sizevalue"==e&&(nl(),tl(),_l.value="",ka.value.indexOf("%")>-1&&(ka.value="",ga.value=0))},Xa=(e,l)=>{var a,u;const o="pricevalue"==l?Ba.value:Vl.value?ba.value:null==(a=Tl.value)?void 0:a.decimal,i=p(e,o)||"";if(!(null==(u=Ol.value)?void 0:u.account))return ma.value="",ga.value=0,void(ka.value="");if("sizevalue"==l)if(ka.value=new y(i).gte(Ea.value)?Ea.value.toFixed(o,1):i,ka.value){const e=ka.value==d(Ea.value,La.value)?new y(100):new y(ka.value||0).div(Ea.value).times(100);ga.value=e.gte(100)?100:Number(e.toFixed(2,1))}else ga.value=0;"pricevalue"==l&&(ma.value=i)},eu=e=>{da.value=e},lu=h(!1),au=()=>{fl.value=!1,lu.value=!1},uu=()=>{fl.value=!1,nu()},ou=C((()=>{const e=h(new y(0));return la.value.forEach((l=>{l.productId==Tl.value.id&&(e.value=e.value.plus(l.size))})),e.value=e.value.plus(Ra.value),e.value}));let iu=!1;const nu=async()=>{var e,l,a,u,o,i,n,t;if(iu)return;const{referralStorageManagerAddr:v,chainId:r}=Sl();if(m()||pl(),!xa.value||!ka.value){if(!ka.value){const l=Vl.value?new y(Rl.value).times(xa.value).toFixed(La.value,0):new y(Rl.value).times(xa.value).div(ha.value).toFixed(La.value,0);_l.value=wl("error.minOpenValue",{a:l,b:Vl.value?Pl.value:null==(e=Tl.value)?void 0:e.base})}return}iu=!0,hl.value=!0;const s=await w({address:v,abi:k.abi,functionName:"codeOwners",chainId:r,args:[$(null==(l=aa.value)?void 0:l.code,{size:32})]});if(ou.value.gt(Tl.value.maxPositionSize))return _l.value=wl("error.noMaxPosition",{a:Tl.value.maxPositionSize.toFixed(La.value,1),b:Pl.value}),iu=!1,void(hl.value=!1);let d,c,p=Ra.value.div(xa.value);if(Ea.value.lt(ka.value))return _l.value=wl("error.maxOpen",{a:Ea.value.toFixed(La.value,1),b:Vl.value?Pl.value:null==(a=Tl.value)?void 0:a.base}),iu=!1,void(hl.value=!1);if(p.lt(Rl.value)){const e=Vl.value?new y(Rl.value).times(xa.value).toFixed(La.value,0):new y(Rl.value).times(xa.value).div(ha.value).toFixed(La.value,0);return _l.value=wl("error.minOpenValue",{a:e,b:Vl.value?Pl.value:null==(u=Tl.value)?void 0:u.base}),iu=!1,void(hl.value=!1)}if(2==pa.value&&!lu.value){if(!(da.value?new y(ha.value).gte(ma.value):new y(ha.value).lte(ma.value)))return lu.value=!0,fl.value=!0,iu=!1,void(hl.value=!1)}if(3==pa.value&&(c=da.value?new y(ha.value).gte(ma.value):new y(ha.value).lte(ma.value)),1==pa.value){await gl(!1);let e=ha.value;if(e=da.value?new y(e).times(.002).plus(e):new y(e).minus(new y(e).times(.002)),e.lte(0))return hl.value=!1,void(iu=!1);d=await Fl([Tl.value.id,g(p),g(xa.value),da.value,g(e),$("0x0000000000000000000000000000000000000000"==s?"":(null==(o=aa.value)?void 0:o.code)||(null==(i=xl.query)?void 0:i.sCode),{size:32})],"createIncreasePosition",1,[Tl.value.base,Tl.value.quote].join("/"),da.value,da.value?wl("orderType.marketLong"):wl("orderType.marketShort"),Na.value)}1!=pa.value&&(d=await Fl([Tl.value.id,g(p),g(xa.value),da.value,g(ma.value),3==pa.value?c?!da.value:da.value:!da.value,$("0x0000000000000000000000000000000000000000"==s?"":(null==(n=aa.value)?void 0:n.code)||(null==(t=xl.query)?void 0:t.sCode),{size:32})],"createIncreaseOrder",2,[Tl.value.base,Tl.value.quote].join("/"),da.value,3!=pa.value||c?da.value?wl("orderType.limitLong"):wl("orderType.limitShort"):wl(`${x(da.value,da.value).text}`),Na.value)),lu.value=!1,hl.value=!1,d&&(ka.value="",Xa("0","sizevalue"),il.closeDrawer&&il.closeDrawer()),nl(),tl(),iu=!1,kl.exposed.getInviteCode()};return _((()=>xa.value),(()=>{Xa(ka.value,"sizevalue")})),_([()=>ea.value,()=>Ol.value.account],(()=>{Ya(0)})),_([()=>pa.value,()=>Tl.value.symbol],(([e])=>{ka.value="",ga.value=0,1!=e&&(ma.value=d(ha.value,Ba.value))})),_((()=>Vl.value),(()=>{ka.value="",ga.value=0}),{deep:!0}),_([()=>da.value,()=>pa.value,()=>ka.value,()=>Vl.value,()=>Tl.value.id],(()=>{_l.value=""})),_((()=>Zl.value),(e=>{1!=pa.value&&(ma.value=d(e,Ba.value))})),_((()=>$l.value),(()=>{_l.value=""})),(l,a)=>{var u,o,i,n,t,r,s,p,m,k,g,x,b,f,y,w,$;const h=I("a-tab-pane"),F=I("a-tabs"),S=I("icon-down"),C=I("a-input"),_=I("a-space"),il=I("VueSlider"),nl=I("icon-exclamation-circle-fill"),tl=I("a-alert"),vl=I("a-button"),sl=I("KiloGuide"),cl=I("ConnectWallet"),kl=I("KiloTooltip"),gl=I("icon-up"),wl=I("KiloLeverage"),$l=I("KiloOrderPlacement"),Fl=I("a-col"),Sl=I("a-row"),Il=I("a-modal");return z(),L(N,null,[T("div",K,[e.orderMobile?O("",!0):(z(),L("div",A,[T("div",{class:M(["islong-tab","kiloex-order","kiloex-order-type-long",da.value&&"active active-long"]),onClick:a[0]||(a[0]=e=>eu(!0))},B(l.$t("order.long")),3),T("div",{class:M(["islong-tab","kiloex-order","kiloex-order-type-short",!da.value&&"active active-short"]),onClick:a[1]||(a[1]=e=>eu(!1))},B(l.$t("order.short")),3)])),q(F,{"default-active-key":"1","active-key":pa.value,"onUpdate:activeKey":a[2]||(a[2]=e=>pa.value=e),class:"kilo-order-tab"},{default:P((()=>[(z(!0),L(N,null,j(U(sa),((e,l)=>(z(),V(h,{key:l},{title:P((()=>[T("div",R,B(e),1)])),_:2},1024)))),128))])),_:1},8,["active-key"]),T("div",H,[T("div",{class:"kilo-order-input-item kiloex-order kiloex-order-leverage",onClick:a[3]||(a[3]=e=>ca.value=!0)},[T("div",Q,[T("img",{src:U(c)("svg/leverage.svg"),alt:"",srcset:""},null,8,G)]),T("div",W,[T("div",J,B(l.$t("positions.leverage")),1),T("div",Y,B(U(xa))+"x",1)]),q(S,{size:"14",class:"kiloex-order kiloex-order-leverage"})]),1!=pa.value?E((z(),L("div",{key:0,class:M(["kilo-order-input-item",ta.value&&"focus"]),onClick:a[7]||(a[7]=()=>{Ll.value.focus(),ta.value=!0})},[T("div",Z,[T("img",{src:U(c)("svg/usdt.svg"),alt:"",srcset:""},null,8,X)]),T("div",ee,[T("div",le,B(3==pa.value?l.$t("order.triggerPrice"):l.$t("order.orderPrice")),1),T("div",ae,[q(C,{ref_key:"pricevalueRef",ref:Ll,class:"kilo-input-order",modelValue:ma.value,"onUpdate:modelValue":a[4]||(a[4]=e=>ma.value=e),placeholder:"0",onFocus:a[5]||(a[5]=e=>Za("pricevalue")),size:"large",onInput:a[6]||(a[6]=e=>Xa(ma.value,"pricevalue"))},null,8,["modelValue"])])]),T("div",ue,[T("div",oe,[q(_,{size:[8],direction:"vertical"},{default:P((()=>[T("span",{class:"laster",onClick:Ga},B(l.$t("public.last")),1)])),_:1})])])],2)),[[ia,va]]):O("",!0),E((z(),L("div",{class:M(["kilo-order-input-item",na.value&&"focus"]),onClick:a[12]||(a[12]=()=>{zl.value.focus(),na.value=!0})},[T("div",ie,[T("img",{src:U(c)(""+(U(Vl)?"svg/usdt.svg":`token/${null==(u=U(Tl))?void 0:u.base}.svg`)),alt:"",srcset:""},null,8,ne)]),T("div",te,[T("div",ve,[T("div",{class:"select-dropdown-quote-order kiloex-order kiloex-order-order-by-value",onClick:a[8]||(a[8]=e=>yl.value=!0)},[T("span",re,B(U(Vl)?l.$t("order.orderByValue"):l.$t("order.orderByQty")),1),q(S,{size:14,class:"kiloex-order kiloex-order-order-by-value"})])]),T("div",se,[q(C,{ref_key:"sizevalueRef",ref:zl,class:"kilo-input-order",placeholder:"0",onFocus:a[9]||(a[9]=e=>Za("sizevalue")),modelValue:ka.value,"onUpdate:modelValue":a[10]||(a[10]=e=>ka.value=e),size:"large",onInput:a[11]||(a[11]=e=>Xa(ka.value,"sizevalue"))},null,8,["modelValue"])]),T("div",de,B(l.$t("order.avbl"))+": "+B((null==(i=null==(o=U(Ol))?void 0:o.balance)?void 0:i.truncate(2))||0)+" "+B(U(Pl)),1)])],2)),[[ia,ra]]),T("div",null,[q(_,{direction:"vertical",size:[0,8],fill:""},{default:P((()=>[T("div",ce,[T("span",{onClick:a[13]||(a[13]=e=>Ya(0))},"0%"),q(il,{class:"kilo-slider",min:0,max:100,modelValue:ga.value,"onUpdate:modelValue":a[14]||(a[14]=e=>ga.value=e),step:1,marks:Qa.value,"show-tooltip":"","drag-on-click":!0,onChange:Ja,tooltipFormatter:Wa},null,8,["modelValue","marks"]),T("span",{onClick:a[15]||(a[15]=e=>Ya(100))},"100%")])])),_:1})]),(null==(n=U(v)[U(ea)])?void 0:n.mainnet)?O("",!0):(z(),L("div",pe,[1*(null==(t=U(Ol))?void 0:t.chainBalance)<U(Fa)?(z(),V(tl,{key:0,type:"error",class:"kilo-order-error"},{icon:P((()=>[q(nl)])),default:P((()=>{var e,l;return[T("a",me,"Mint test "+B((null==(e=U(Ol))?void 0:e.chainSymbol)||(null==(l=U(v)[U(ea)])?void 0:l.mainSymbol)),1)]})),_:1})):1*(null==(s=null==(r=U(Ol))?void 0:r.balance)?void 0:s.truncate(2))==0?(z(),V(tl,{key:1,type:"error",class:"kilo-order-error"},{icon:P((()=>[q(nl)])),default:P((()=>[T("a",{onClick:a[16]||(a[16]=e=>{Cl.$patch({mintTestUsdt:!0})})},B(l.$t("public.mintUsdt")),1)])),_:1})):O("",!0)])),(null==(p=U(v)[U(ea)])?void 0:p.mainnet)&&(1*(null==(m=U(Ol))?void 0:m.balance)==0||1*(null==(k=U(Ol))?void 0:k.chainBalance)<U(Fa))?(z(),L("div",ke,[q(tl,{type:"error",class:"kilo-order-error"},{icon:P((()=>[q(nl)])),default:P((()=>[T("span",{innerHTML:l.$t("error.noAvbl",{a:U(Sa)})},null,8,ge)])),_:1})])):O("",!0),1*(null==(g=U(Ol))?void 0:g.balance)>0&&!Ua.value&&U(Va)<=0?(z(),L("div",xe,[q(tl,{type:"error",class:"kilo-order-error"},{icon:P((()=>[q(nl)])),default:P((()=>[D(" "+B(l.$t("error.noMaxOpen")),1)])),_:1})])):O("",!0),_l.value?(z(),L("div",be,[q(tl,{type:"error",class:"kilo-order-error"},{icon:P((()=>[q(nl)])),default:P((()=>[D(" "+B(_l.value),1)])),_:1})])):O("",!0),U(oa)>=800?(z(),L("div",fe,[(null==(x=U(Ol))?void 0:x.account)?(z(),L("div",ye,[q(sl,{text:l.$t("guide.open"),position:"left",visible:!(null==(b=U(rl))?void 0:b.backup1)&&(null==(f=U(Ol))?void 0:f.account)&&3==U(dl)&&"/trade"==U(xl).path},{container:P((()=>[da.value?(z(),V(vl,{key:0,loading:hl.value,type:"primary",onClick:a[17]||(a[17]=e=>nu(!0)),class:M(["long kilo-order-btn",`kiloex-order kiloex-order-total kiloex-order-${ml.value[pa.value]}-long`]),long:"",disabled:!U(Tl).isOpen||U(Ca)||U(Va)<=0},{default:P((()=>[D(B(l.$t("order.buy"))+"/"+B(l.$t("order.long")),1)])),_:1},8,["loading","class","disabled"])):O("",!0)])),footer:P((()=>[T("div",{onClick:a[18]||(a[18]=e=>pl())},B(l.$t("guide.ok")),1)])),_:1},8,["text","visible"]),q(sl,{text:l.$t("guide.open"),position:"left",visible:!(null==(y=U(rl))?void 0:y.backup1)&&(null==(w=U(Ol))?void 0:w.account)&&3==U(dl)&&"/trade"==U(xl).path},{container:P((()=>[da.value?O("",!0):(z(),V(vl,{key:0,loading:hl.value,type:"primary",onClick:a[19]||(a[19]=e=>nu()),class:M(["short kilo-order-btn",`kiloex-order kiloex-order-total kiloex-order-${ml.value[pa.value]}-short`]),long:"",disabled:!U(Tl).isOpen||U(Ca)||U(Va)<=0},{default:P((()=>[D(B(l.$t("order.sell"))+"/"+B(l.$t("order.short")),1)])),_:1},8,["loading","class","disabled"]))])),footer:P((()=>[T("div",{onClick:a[20]||(a[20]=e=>pl())},B(l.$t("guide.ok")),1)])),_:1},8,["text","visible"])])):(z(),L("div",we,[q(cl,{iconSrc:"svg/walletBg.svg",class:"kilo-order-connect",long:!0})]))])):O("",!0),T("div",null,[q(_,{direction:"vertical",size:[0,8],fill:""},{default:P((()=>{var e,u,o,i,n;return[T("div",$e,[T("span",null,[q(kl,{text:l.$t("order.cost"),content:l.$t("tips.cost")},null,8,["text","content"])]),T("span",he,B(U(d)(U(Ha)))+" "+B(U(Pl)),1)]),T("div",Fe,[T("span",null,B(l.$t("order.max")),1),T("span",{class:"kilo-span-value kilo-span-value-maxopen",onClick:Oa},B(isNaN(U(Ea))?"--":U(d)(U(Ea),U(La)))+" "+B(U(Vl)?U(Pl):null==(e=U(Tl))?void 0:e.base),1)]),T("div",Se,[T("span",null,[q(kl,{text:l.$t("order.estExcutionPrice"),content:l.$t("tips.estExcutionPrice")},null,8,["text","content"])]),T("span",Ce,B(U(Da)),1)]),T("div",_e,[T("span",null,[q(kl,{text:l.$t("order.spread"),content:l.$t("tips.spread")},null,8,["text","content"])]),T("span",Ie,B(U(d)(U(qa)||0,2))+"%",1)]),T("div",ze,[T("span",null,[q(kl,{text:l.$t("order.positionSize"),content:l.$t("tips.positionSize")},null,8,["text","content"])]),T("span",Le,B(U(Pa))+" "+B(U(Vl)?U(Pl):null==(u=U(Tl))?void 0:u.base),1)]),T("div",Te,[T("span",null,B(l.$t("order.fees")),1),T("span",Me,B(U(d)(U(Na),4))+" "+B(U(Pl)),1)]),T("div",Be,[T("span",null,B(l.$t("order.executionFee")),1),T("span",Oe,B(1==pa.value?U(Dl):U(Kl))+" "+B(U(El)?U(El).toUpperCase():null==(o=U(v)[U(ea)])?void 0:o.mainSymbol),1)]),T("div",qe,[T("span",null,[q(kl,{text:l.$t("order.liqPrice"),content:l.$t("tips.liqPrice")},null,8,["text","content"])]),T("span",Pe,B(U(d)(U(Ka)||0,U(Ba))),1)]),bl.value?O("",!0):(z(),L("div",{key:0,class:"klio-more",onClick:a[21]||(a[21]=e=>bl.value=!0)},[D(B(l.$t("order.more"))+" ",1),q(S)])),bl.value?(z(),L("div",{key:1,class:"klio-more",onClick:a[22]||(a[22]=e=>bl.value=!1)},[D(B(l.$t("order.hide"))+" ",1),q(gl)])):O("",!0),bl.value?(z(),L(N,{key:2},[T("div",Ne,[T("span",null,[q(kl,{text:l.$t("market.openInterestL"),content:l.$t("tips.openInterestLong",{symbol:[U(Tl).base,U(Tl).quote].join("/")})},null,8,["text","content"])]),T("span",je,B(U(d)(U(ya),0)),1)]),T("div",Ue,[T("span",null,[q(kl,{text:l.$t("market.openInterestS"),content:l.$t("tips.openInterestShort",{symbol:[U(Tl).base,U(Tl).quote].join("/")})},null,8,["text","content"])]),T("span",Ve,B(U(d)(U(wa),0)),1)]),T("div",Ee,[T("span",null,[q(kl,{text:l.$t("market.funding"),content:l.$t("tips.funding")},null,8,["text","content"])]),T("span",De,B(U(Al))+" %",1)]),T("div",Ke,[T("span",null,[q(kl,{text:l.$t("order.maxExposure"),content:l.$t("tips.maxExposure")},null,8,["text","content"])]),T("span",Ae,B(U(d)(U(Ia)||0)),1)]),T("div",Re,[T("span",null,B(l.$t("order.LiquidationThreshold")),1),T("span",He,B(U(fa))+"%",1)]),T("div",Qe,[T("span",null,B(l.$t("order.minLeverage")),1),T("span",Ge,B(null==(i=U(Tl))?void 0:i.minLeverage)+"x ",1)]),T("div",We,[T("span",null,B(l.$t("order.maxLeverage")),1),T("span",Je,B(null==(n=U(Tl))?void 0:n.maxLeverage)+"x ",1)]),T("div",Ye,[T("span",null,B(l.$t("order.feeRate")),1),T("span",Ze,B(U(d)(U($a)||0))+"%",1)]),T("div",Xe,[T("span",null,B(l.$t("order.minOpenMargin")),1),T("span",el,B(U(Rl))+" "+B(U(Pl)),1)]),T("div",ll,[T("span",null,B(l.$t("order.vault")),1),T("span",al,B(U(d)(U(Hl)))+" "+B(U(Pl)),1)])],64)):O("",!0)]})),_:1})])]),(null==($=U(Ol))?void 0:$.account)&&U(oa)<800?(z(),L("div",ul,[da.value?(z(),V(vl,{key:0,loading:hl.value,type:"primary",onClick:a[23]||(a[23]=e=>nu()),class:M(["long kilo-order-btn",`kiloex-order kiloex-order-total kiloex-order-${ml.value[pa.value]}-long`]),long:"",disabled:!U(Tl).isOpen||U(Ca)||U(Va)<=0},{default:P((()=>[D(B(l.$t("order.buy"))+"/"+B(l.$t("order.long")),1)])),_:1},8,["loading","class","disabled"])):O("",!0),da.value?O("",!0):(z(),V(vl,{key:1,loading:hl.value,type:"primary",onClick:a[24]||(a[24]=e=>nu()),class:M(["short kilo-order-btn",`kiloex-order kiloex-order-total kiloex-order-${ml.value[pa.value]}-short`]),long:"",disabled:!U(Tl).isOpen||U(Ca)||U(Va)<=0},{default:P((()=>[D(B(l.$t("order.sell"))+"/"+B(l.$t("order.short")),1)])),_:1},8,["loading","class","disabled"]))])):O("",!0)]),q(wl,{visible:ca.value,"onUpdate:visible":a[25]||(a[25]=e=>ca.value=e)},null,8,["visible"]),q($l,{visible:yl.value,"onUpdate:visible":a[26]||(a[26]=e=>yl.value=e)},null,8,["visible"]),q(Il,{visible:fl.value,"onUpdate:visible":a[27]||(a[27]=e=>fl.value=e),"modal-class":"kilo-limit-max-price-modal","render-to-body":!0,footer:!1,width:"343px","unmount-on-close":""},{title:P((()=>[])),default:P((()=>[T("div",ol,B(l.$t("order.trigger")),1),q(Sl,{gutter:16},{default:P((()=>[q(Fl,{span:12},{default:P((()=>[q(vl,{size:"large",long:"",onClick:au},{default:P((()=>[D(B(l.$t("public.cancel")),1)])),_:1})])),_:1}),q(Fl,{span:12},{default:P((()=>[q(vl,{type:"primary",size:"large",long:"",onClick:uu},{default:P((()=>[D(B(l.$t("public.confirm")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])],64)}}},[["__scopeId","data-v-304f7565"]]);export{il as default};
